# ğŸš€ End-to-End Jenkins CI/CD Pipeline with Docker, Docker Hub & Kubernetes (kind)

This project demonstrates a **complete CI/CD pipeline** using **Jenkins**, **Docker**, **Docker Hub**, and **Kubernetes (kind)** deployed on **AWS EC2 instances**.

The pipeline automatically builds a Docker image, pushes it to Docker Hub, and deploys the application into a Kubernetes cluster.

---

## ğŸ“Œ Project Architecture Overview

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      Developer      â”‚
                    â”‚   Pushes code to    â”‚
                    â”‚       GitHub        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Jenkins Controller â”‚
                    â”‚   (EC2 Instance)   â”‚
                    â”‚                    â”‚
                    â”‚  - Pipeline logic  â”‚
                    â”‚  - Git pull        â”‚
                    â”‚  - Sends job via   â”‚
                    â”‚    SSH to agent    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ SSH
                              â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   Jenkins Agent (Worker)   â”‚
                â”‚        EC2 Instance        â”‚
                â”‚                            â”‚
                â”‚  1. Pull source code       â”‚
                â”‚  2. Build Docker image     â”‚
                â”‚  3. Push to Docker Hub     â”‚
                â”‚  4. Deploy to Kubernetes   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚        Docker Engine       â”‚
                â”‚     (Installed on EC2)     â”‚
                â”‚                            â”‚
                â”‚  - Builds images           â”‚
                â”‚  - Runs containers         â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚        kind (Kubernetes)         â”‚
            â”‚   Kubernetes running in Docker   â”‚
            â”‚                                  â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
            â”‚  â”‚ Kubernetes Control Plane   â”‚  â”‚
            â”‚  â”‚ (as Docker containers)     â”‚  â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
            â”‚               â”‚                  â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
            â”‚  â”‚ Kubernetes Worker Node     â”‚ â”‚
            â”‚  â”‚ (as Docker container)      â”‚ â”‚
            â”‚  â”‚                             â”‚ â”‚
            â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
            â”‚  â”‚   â”‚   Application Pod   â”‚   â”‚ â”‚
            â”‚  â”‚   â”‚                     â”‚   â”‚ â”‚
            â”‚  â”‚   â”‚  App Container      â”‚   â”‚ â”‚
            â”‚  â”‚   â”‚  (Python app)       â”‚   â”‚ â”‚
            â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Kubernetes Service â”‚
                  â”‚   NodePort:30007   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                 http://EC2-Worker-IP:30007
                            â”‚
                            â–¼
                       End User
Insideâ€“Outside View (Machine Level)

This is what exists inside the worker EC2:

EC2 Worker Machine (Ubuntu OS)
â”‚
â”œâ”€â”€ Docker Engine
â”‚
â”‚   â”œâ”€â”€ kind-control-plane (container)
â”‚   â”‚     â””â”€â”€ Kubernetes control plane
â”‚   â”‚
â”‚   â”œâ”€â”€ kind-worker (container)
â”‚   â”‚     â””â”€â”€ Kubernetes worker node
â”‚   â”‚           â””â”€â”€ Pod
â”‚   â”‚                â””â”€â”€ App container
â”‚   â”‚                     â””â”€â”€ Python app running
â”‚   â”‚
â”‚   â””â”€â”€ Other Docker images
â”‚
â””â”€â”€ System tools (kubectl, kind, etc.)


---

## ğŸ§  Core Concept (Very Important)

> **Docker builds the image outside the Kubernetes cluster.**  
> **Kubernetes only pulls and runs the image inside the cluster.**

---

## ğŸ› ï¸ Technologies Used

| Tool | Purpose |
|----|--------|
| AWS EC2 | Jenkins controller & agent |
| Jenkins | CI/CD automation |
| Docker | Image build & container runtime |
| Docker Hub | Image registry |
| Kubernetes (kind) | Container orchestration |
| GitHub | Source code repository |

---

## ğŸ–¥ï¸ Infrastructure Setup

### EC2 Instances
- **Jenkins Controller EC2**
- **Jenkins Agent / Worker EC2**

---

## ğŸ”Œ Jenkins Plugins Used

- Pipeline
- Git
- GitHub Integration
- SSH Agent
- Docker Pipeline
- Credentials Binding

---

## ğŸ”‘ Credentials Configuration

### Jenkins Credentials
- **SSH Credential**
  - ID: `jenkins-agent-key`
  - Used for controller â†’ agent communication

- **Docker Hub Credential**
  - ID: `dockerhub-creds`
  - Used to push Docker images

---

## âš™ï¸ Worker Node Setup

### Install Java
```bash
sudo apt update
sudo apt install fontconfig openjdk-21-jre
java -version

Install Python
sudo apt install -y python3 python3-pip python3-venv python3-full

Install Docker
sudo apt install -y docker.io
sudo usermod -aG docker ubuntu
sudo systemctl start docker
sudo systemctl enable docker

â˜¸ï¸ Kubernetes Setup using kind
Install kubectl
curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s \
https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
chmod +x kubectl
sudo mv kubectl /usr/local/bin/

Install kind
curl -Lo kind https://kind.sigs.k8s.io/dl/v0.20.0/kind-linux-amd64
chmod +x kind
sudo mv kind /usr/local/bin/kind

kind Cluster Configuration
apiVersion: kind.x-k8s.io/v1alpha4
kind: Cluster
nodes:
- role: control-plane
  extraPortMappings:
  - containerPort: 30007
    hostPort: 30007
    protocol: TCP

Create Cluster
kind create cluster --config kind-config.yaml
kubectl get nodes

ğŸ“¦ Components Inside Kubernetes Cluster
Kubernetes Cluster (kind)
â”‚
â”œâ”€â”€ Control Plane
â”‚     â”œâ”€â”€ kube-apiserver
â”‚     â”œâ”€â”€ kube-scheduler
â”‚     â”œâ”€â”€ kube-controller-manager
â”‚     â””â”€â”€ etcd
â”‚
â”œâ”€â”€ Worker Node
â”‚     â”œâ”€â”€ kubelet
â”‚     â”œâ”€â”€ kube-proxy
â”‚     â””â”€â”€ Container Runtime (Docker/containerd)
â”‚
â”œâ”€â”€ Pod
â”‚     â””â”€â”€ Application Container
â”‚           â””â”€â”€ Python Application
â”‚
â””â”€â”€ Service
      â””â”€â”€ NodePort (30007)

ğŸ” CI/CD Pipeline Workflow
1. Developer pushes code to GitHub
2. Jenkins pipeline triggers automatically
3. Jenkins Controller sends job to Agent via SSH
4. Docker image is built on Agent EC2
5. Image is pushed to Docker Hub
6. Kubernetes deployment is applied
7. Pod is created inside the cluster
8. Application is exposed via NodePort

ğŸš¦ Application Runtime Flow
Browser
  â†“
EC2 Public IP : 30007
  â†“
Kubernetes NodePort Service
  â†“
Pod
  â†“
Container
  â†“
Application

ğŸ” Verification Commands
kubectl get nodes
kubectl get pods
kubectl get svc
kubectl get pods -n kube-system

ğŸŒ Application Access
http://<EC2-WORKER-PUBLIC-IP>:30007


Ensure port 30007 is allowed in the EC2 Security Group.

ğŸ§ª CI vs CD in This Project
Continuous Integration (CI)

Source code pull

Docker image build

Image push to Docker Hub

Continuous Deployment (CD)

Image pull by Kubernetes

Pod creation

Application deployment

ğŸ¯ Key Takeaways

Docker builds images outside Kubernetes

Kubernetes manages and runs containers

Jenkins automates the entire pipeline

kind is used for lightweight Kubernetes testing

ğŸ“Œ Interview One-Liner

â€œIn this project, Jenkins builds Docker images on the agent EC2, pushes them to Docker Hub, and Kubernetes (kind) pulls and deploys the image as pods exposed using a NodePort service.â€

âœ… Project Status

âœ” CI/CD Pipeline Implemented
âœ” Dockerized Application
âœ” Kubernetes Deployment
âœ” Application Accessible
